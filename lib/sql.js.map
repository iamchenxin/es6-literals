{"version":3,"sources":["sql.js"],"names":[],"mappings":";;;;;;;AAQA,SAAS,kBAAT,CAA4B,KAA5B,EAAmC;AACjC,OAAK,KAAL,GAAa,KAAb,CADiC;AAEjC,OAAK,OAAL,iEACc,KADd,CAFiC;AAIjC,OAAK,QAAL,GAAgB,YAAW;AAAE,WAAO,KAAK,OAAL,CAAT;GAAX,CAJiB;CAAnC;;AAOA,SAAS,WAAT,CAAqB,KAArB,EAA4B;AAC1B,OAAK,KAAL,GAAa,KAAb,CAD0B;CAA5B;;AAIA,SAAS,IAAT,CAAc,KAAd,EAAwC;AACtC,MAAI,OAAO,KAAP,KAAiB,QAAjB,EAA2B;AAC7B,UAAM,IAAI,kBAAJ,CAAuB,KAAvB,CAAN,CAD6B;GAA/B;AAGA,MAAI,MAAM,CAAN,MAAW,GAAX,EAAgB;AAClB,kBAAY,WAAZ;AADkB,GAApB;AAGA,SAAO,IAAI,WAAJ,CAAgB,KAAhB,CAAP,CAPsC;CAAxC;;;AAWA,SAAS,GAAT,CAAa,IAAb,EAAwD;oCAAzB;;GAAyB;;AACtD,MAAM,SAAQ,EAAR,CADgD;AAEtD,MAAM,OAAO,KAAK,MAAL,CAAY,UAAC,IAAD,EAAO,IAAP,EAAa,CAAb,EAAmB;AAC1C,QAAM,MAAM,KAAK,IAAE,CAAF,CAAX,CADoC;AAE1C,QAAI,eAAe,WAAf,EAA4B;AAC9B,aAAO,OAAK,IAAI,KAAJ,GAAU,IAAf,CADuB;KAAhC,MAEO;AACL,aAAO,IAAP,CAAY,GAAZ,EADK;AAEL,aAAO,OAAK,GAAL,GAAS,OAAO,MAAP,GAAc,IAAvB,CAFF;KAFP;GAFuB,CAAnB,CAFgD;;AAYtD,SAAO;AACL,UAAK,IAAL;AACA,YAAQ,MAAR;GAFF,CAZsD;CAAxD;;QAmBE;QACA","file":"sql.js","sourcesContent":["/*\n *@flow\n */\ntype sqlResult = {\n  text:string,\n  values:mixed[]\n};\n\nfunction SQL_LITERALS_ERROR(value) {\n  this.value = value;\n  this.message = `the value inserted to SQL must be string,\n    but it is ${value}`;\n  this.toString = function() { return this.message;};\n}\n\nfunction InsertValue(value) {\n  this.value = value;\n}\n\nfunction inst(value:string):InsertValue {\n  if (typeof value !== 'string') {\n    throw new SQL_LITERALS_ERROR(value);\n  }\n  if (value[0]!=='\"') {\n    value = `\"${value}\"`; // auto double quoted,to void\n  }\n  return new InsertValue(value);\n}\n\n//for postgres sql\nfunction SQL(strs:string[], ...args:mixed[]): sqlResult {\n  const values =[];\n  const text = strs.reduce((prev, curr, i) => {\n    const arg = args[i-1];\n    if (arg instanceof InsertValue) {\n      return prev+arg.value+curr;\n    } else {\n      values.push(arg);\n      return prev+'$'+values.length+curr;\n    }\n  });\n\n  return {\n    text:text,\n    values: values\n  };\n}\n\nexport {\n  inst,\n  SQL\n};\n"],"sourceRoot":"/home/iamchenxin/project/my/es6-literals/src"}